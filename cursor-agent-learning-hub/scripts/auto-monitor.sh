#!/bin/bash
# Auto Monitoring Script

echo "ðŸ“Š Auto Monitoring - Ultimate Assistant Mode"

PROJECT_NAME=$1
PROJECT_EMAIL=${USER_EMAIL:-"user@email.com"}

if [ -z "$PROJECT_NAME" ]; then
    echo "âŒ Project name is required"
    exit 1
fi

echo "ðŸ“‹ Monitoring project: $PROJECT_NAME"
echo "ðŸ“§ Email: $PROJECT_EMAIL"

# Check project status
cd "$PROJECT_NAME"

# Check if project is running
if pgrep -f "$PROJECT_NAME" > /dev/null; then
    STATUS="Running"
    echo "âœ… Project is running"
else
    STATUS="Stopped"
    echo "âŒ Project is stopped"
fi

# Check disk usage
DISK_USAGE=$(du -sh . | cut -f1)
echo "ðŸ’¾ Disk usage: $DISK_USAGE"

# Check memory usage
MEMORY_USAGE=$(ps aux | grep "$PROJECT_NAME" | awk '{sum+=$6} END {print sum/1024 " MB"}')
echo "ðŸ§  Memory usage: $MEMORY_USAGE"

# Generate monitoring report
cat > "monitoring-report-$(date +%Y%m%d).md" << EOL
# Monitoring Report - $PROJECT_NAME

**Date**: $(date)
**Status**: $STATUS
**Disk Usage**: $DISK_USAGE
**Memory Usage**: $MEMORY_USAGE

## Performance Metrics
- **Uptime**: $(uptime)
- **Load Average**: $(cat /proc/loadavg)
- **Disk Space**: $(df -h . | tail -1)

## Recommendations
- Monitor disk usage regularly
- Check memory consumption
- Review performance metrics

---
*Generated by Ultimate Assistant - $PROJECT_EMAIL*
EOL

echo "âœ… Monitoring report generated"

# Send monitoring email
echo "ðŸ“§ Sending monitoring report to $PROJECT_EMAIL"
mail -s "Ultimate Assistant: $PROJECT_NAME Monitoring Report" "$PROJECT_EMAIL" < "monitoring-report-$(date +%Y%m%d).md"

echo "ðŸŽ‰ Monitoring completed for $PROJECT_NAME!"
echo "ðŸ“§ Report sent to $PROJECT_EMAIL"
